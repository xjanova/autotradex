<UserControl x:Class="AutoTradeX.UI.Views.DashboardPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="clr-namespace:AutoTradeX.UI.Controls"
             xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.WPF;assembly=LiveChartsCore.SkiaSharpView.WPF">

    <UserControl.Resources>
        <!-- Glass Card Style -->
        <Style x:Key="GlassCard" TargetType="Border">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#20FFFFFF" Offset="0"/>
                        <GradientStop Color="#10FFFFFF" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush" Value="#30FFFFFF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.3" Color="#000000"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Stat Card Style -->
        <Style x:Key="StatCard" TargetType="Border">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#18FFFFFF" Offset="0"/>
                        <GradientStop Color="#0AFFFFFF" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush" Value="#25FFFFFF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="16,14"/>
        </Style>

        <!-- Premium ScrollBar Thumb Style -->
        <Style x:Key="PremiumScrollBarThumb" TargetType="Thumb">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Thumb">
                        <Border x:Name="thumb" CornerRadius="5" MinHeight="40" Width="8" HorizontalAlignment="Center">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Color="#8B5CF6" Offset="0"/>
                                    <GradientStop Color="#7C3AED" Offset="0.5"/>
                                    <GradientStop Color="#6D28D9" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="8" ShadowDepth="0" Opacity="0.6" Color="#7C3AED"/>
                            </Border.Effect>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="thumb" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                            <GradientStop Color="#A78BFA" Offset="0"/>
                                            <GradientStop Color="#8B5CF6" Offset="0.5"/>
                                            <GradientStop Color="#7C3AED" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Premium ScrollBar Style -->
        <Style x:Key="PremiumScrollBar" TargetType="ScrollBar">
            <Setter Property="Width" Value="10"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollBar">
                        <Grid Width="10" Margin="2,4,6,4">
                            <Border Background="#15FFFFFF" CornerRadius="5" Width="8" HorizontalAlignment="Center"/>
                            <Track x:Name="PART_Track" IsDirectionReversed="True" Width="10">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.PageUpCommand">
                                        <RepeatButton.Template>
                                            <ControlTemplate TargetType="RepeatButton">
                                                <Border Background="Transparent"/>
                                            </ControlTemplate>
                                        </RepeatButton.Template>
                                    </RepeatButton>
                                </Track.DecreaseRepeatButton>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.PageDownCommand">
                                        <RepeatButton.Template>
                                            <ControlTemplate TargetType="RepeatButton">
                                                <Border Background="Transparent"/>
                                            </ControlTemplate>
                                        </RepeatButton.Template>
                                    </RepeatButton>
                                </Track.IncreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb Style="{StaticResource PremiumScrollBarThumb}" Width="8"/>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Premium ScrollViewer Style -->
        <Style x:Key="PremiumScrollViewer" TargetType="ScrollViewer">
            <Setter Property="CanContentScroll" Value="False"/>
            <Setter Property="HorizontalScrollBarVisibility" Value="Disabled"/>
            <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollViewer">
                        <Grid Background="{TemplateBinding Background}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <ScrollContentPresenter Grid.Column="0" CanContentScroll="False"
                                                    Content="{TemplateBinding Content}"
                                                    Margin="{TemplateBinding Padding}"/>
                            <ScrollBar x:Name="PART_VerticalScrollBar" Grid.Column="1"
                                       Orientation="Vertical" Style="{StaticResource PremiumScrollBar}"
                                       Maximum="{TemplateBinding ScrollableHeight}"
                                       Value="{TemplateBinding VerticalOffset}"
                                       ViewportSize="{TemplateBinding ViewportHeight}"
                                       Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Action Button Style -->
        <Style x:Key="ActionButton" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="8" Padding="14,8">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#7C3AED" Offset="0"/>
                                    <GradientStop Color="#5B21B6" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#8B5CF6" Offset="0"/>
                                            <GradientStop Color="#7C3AED" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Start Button Style -->
        <Style x:Key="StartButton" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="10" Padding="24,12">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#10B981" Offset="0"/>
                                    <GradientStop Color="#059669" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="15" ShadowDepth="0" Opacity="0.5" Color="#10B981"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Stop Button Style -->
        <Style x:Key="StopButton" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="10" Padding="24,12">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#EF4444" Offset="0"/>
                                    <GradientStop Color="#DC2626" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Pause Button Style -->
        <Style x:Key="PauseButton" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="10" Padding="24,12">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#F59E0B" Offset="0"/>
                                    <GradientStop Color="#D97706" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Tab Button Style -->
        <Style x:Key="TabButton" TargetType="RadioButton">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="border" Background="Transparent" CornerRadius="6" Padding="12,6" Cursor="Hand">
                            <TextBlock x:Name="text" Text="{TemplateBinding Content}" FontSize="11" FontWeight="SemiBold" Foreground="#60FFFFFF"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#207C3AED"/>
                                <Setter TargetName="text" Property="Foreground" Value="#7C3AED"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#15FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <!-- Main container with fixed background logo -->
    <Grid>
        <!-- Fixed Logo Background (doesn't scroll, with rotation - like lava effect) -->
        <Grid x:Name="AnimatedLogoContainer"
              HorizontalAlignment="Center" VerticalAlignment="Center"
              IsHitTestVisible="False" Opacity="0.12"
              RenderTransformOrigin="0.5,0.5">
            <!-- Transform for X-axis tilt animation -->
            <Grid.RenderTransform>
                <TransformGroup>
                    <ScaleTransform ScaleX="1" ScaleY="0.85"/>
                    <SkewTransform x:Name="LogoSkew" AngleX="0" AngleY="0"/>
                </TransformGroup>
            </Grid.RenderTransform>

            <!-- Large 80% background logo container (600x500) -->
            <Grid Width="600" Height="500" ClipToBounds="True">
                <!-- Logo Glow -->
                <Border>
                    <Border.Background>
                        <RadialGradientBrush GradientOrigin="0.5,0.5" Center="0.5,0.5" RadiusX="0.6" RadiusY="0.6">
                            <GradientStop Color="#407C3AED" Offset="0"/>
                            <GradientStop Color="#2000D4FF" Offset="0.5"/>
                            <GradientStop Color="#00000000" Offset="1"/>
                        </RadialGradientBrush>
                    </Border.Background>
                </Border>

                <!-- Logo Image - Large Background with slow rotation -->
                <Image Source="/Assets/logo2.png" Stretch="Uniform" Margin="80"
                       RenderOptions.BitmapScalingMode="HighQuality"
                       RenderTransformOrigin="0.5,0.5">
                    <Image.RenderTransform>
                        <RotateTransform x:Name="LogoRotate" Angle="0"/>
                    </Image.RenderTransform>
                </Image>

                <!-- Edge Fade (All sides for smooth background blend) -->
                <Border VerticalAlignment="Bottom" Height="120">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#00000000" Offset="0"/>
                            <GradientStop Color="#FF0A0A1A" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>
                <Border VerticalAlignment="Top" Height="100">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,1" EndPoint="0,0">
                            <GradientStop Color="#00000000" Offset="0"/>
                            <GradientStop Color="#A00A0A1A" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>
                <Border HorizontalAlignment="Left" Width="120">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="1,0" EndPoint="0,0">
                            <GradientStop Color="#00000000" Offset="0"/>
                            <GradientStop Color="#800A0A1A" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>
                <Border HorizontalAlignment="Right" Width="120">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Color="#00000000" Offset="0"/>
                            <GradientStop Color="#800A0A1A" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>
            </Grid>
        </Grid>

        <!-- Scrollable Content -->
        <ScrollViewer Style="{StaticResource PremiumScrollViewer}">
            <Grid Margin="0,0,10,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

            <!-- Row 0: Portfolio Summary & Quick Stats -->
            <Grid Grid.Row="0" Margin="0,0,0,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Portfolio Value Card -->
                <Border Grid.Column="0" Style="{StaticResource GlassCard}" Margin="0,0,10,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel>
                            <TextBlock Text="TOTAL PORTFOLIO VALUE" FontSize="11" FontWeight="Bold" Foreground="#60FFFFFF"/>
                            <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                <TextBlock x:Name="TotalPortfolioValue" Text="$10,000.00" FontSize="36" FontWeight="Bold" Foreground="White"/>
                                <Border x:Name="PnLBadge" Background="#2010B981" CornerRadius="8" Padding="10,5" Margin="15,0,0,0" VerticalAlignment="Center">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock x:Name="TotalPnLPercent" Text="+0.00%" FontSize="14" FontWeight="Bold" Foreground="#10B981"/>
                                        <TextBlock x:Name="TotalPnLValue" Text=" ($0.00)" FontSize="12" Foreground="#10B981" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>

                            <!-- Distribution Bar -->
                            <Grid Margin="0,15,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel>
                                    <TextBlock Text="Balance Distribution" FontSize="10" Foreground="#50FFFFFF" Margin="0,0,0,5"/>
                                    <Grid Height="8">
                                        <Border Background="#15FFFFFF" CornerRadius="4"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition x:Name="ExchangeARatio" Width="50*"/>
                                                <ColumnDefinition x:Name="ExchangeBRatio" Width="50*"/>
                                            </Grid.ColumnDefinitions>
                                            <Border Grid.Column="0" CornerRadius="4,0,0,4">
                                                <Border.Background>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                        <GradientStop Color="#F3BA2F" Offset="0"/>
                                                        <GradientStop Color="#E0A800" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Border.Background>
                                            </Border>
                                            <Border Grid.Column="1" CornerRadius="0,4,4,0">
                                                <Border.Background>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                        <GradientStop Color="#23AF91" Offset="0"/>
                                                        <GradientStop Color="#1A8A72" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Border.Background>
                                            </Border>
                                        </Grid>
                                    </Grid>
                                    <Grid Margin="0,5,0,0">
                                        <StackPanel Orientation="Horizontal">
                                            <Ellipse Width="8" Height="8" Fill="#F3BA2F" Margin="0,0,5,0"/>
                                            <TextBlock Text="Binance" FontSize="10" Foreground="#80FFFFFF" Margin="0,0,5,0"/>
                                            <TextBlock x:Name="ExchangeAPercent" Text="50%" FontSize="10" Foreground="#F3BA2F" FontWeight="SemiBold"/>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                            <Ellipse Width="8" Height="8" Fill="#23AF91" Margin="0,0,5,0"/>
                                            <TextBlock Text="KuCoin" FontSize="10" Foreground="#80FFFFFF" Margin="0,0,5,0"/>
                                            <TextBlock x:Name="ExchangeBPercent" Text="50%" FontSize="10" Foreground="#23AF91" FontWeight="SemiBold"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Grid>
                        </StackPanel>

                        <!-- Bot Control Panel -->
                        <Border Grid.Column="1" Background="#10FFFFFF" CornerRadius="12" Padding="20" Margin="20,0,0,0">
                            <StackPanel>
                                <!-- Bot Status -->
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                    <Grid Width="20" Height="20" Margin="0,0,10,0">
                                        <Ellipse x:Name="BotStatusOuter" Width="20" Height="20">
                                            <Ellipse.Fill>
                                                <SolidColorBrush x:Name="BotStatusOuterBrush" Color="#808080" Opacity="0.3"/>
                                            </Ellipse.Fill>
                                        </Ellipse>
                                        <Ellipse x:Name="BotStatusInner" Width="12" Height="12" HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <Ellipse.Fill>
                                                <SolidColorBrush x:Name="BotStatusInnerBrush" Color="#808080"/>
                                            </Ellipse.Fill>
                                        </Ellipse>
                                    </Grid>
                                    <StackPanel>
                                        <TextBlock x:Name="BotStatusText" Text="Bot Idle" FontSize="14" FontWeight="SemiBold" Foreground="White"/>
                                        <TextBlock x:Name="BotStatusSubtext" Text="Ready to start" FontSize="10" Foreground="#60FFFFFF"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Control Buttons -->
                                <StackPanel Orientation="Horizontal">
                                    <Button x:Name="StartBotButton" Content="▶ Start" Style="{StaticResource StartButton}"
                                            Margin="0,0,8,0" Click="StartBotButton_Click"/>
                                    <Button x:Name="PauseBotButton" Content="⏸ Pause" Style="{StaticResource PauseButton}"
                                            Margin="0,0,8,0" Visibility="Collapsed" Click="PauseBotButton_Click"/>
                                    <Button x:Name="StopBotButton" Content="◼ Stop" Style="{StaticResource StopButton}"
                                            Visibility="Collapsed" Click="StopBotButton_Click"/>
                                </StackPanel>

                                <!-- Quick Stats Below Buttons -->
                                <Grid Margin="0,15,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel>
                                        <TextBlock Text="Today's P&amp;L" FontSize="9" Foreground="#50FFFFFF"/>
                                        <TextBlock x:Name="TodayPnL" Text="$0.00" FontSize="16" FontWeight="Bold" Foreground="#10B981"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                                        <TextBlock Text="Today's Trades" FontSize="9" Foreground="#50FFFFFF" HorizontalAlignment="Right"/>
                                        <TextBlock x:Name="TodayTrades" Text="0" FontSize="16" FontWeight="Bold" Foreground="#00D4FF" HorizontalAlignment="Right"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Border>

                <!-- System Health Panel -->
                <Border Grid.Column="1" Style="{StaticResource GlassCard}" Width="280">
                    <StackPanel>
                        <Grid Margin="0,0,0,12">
                            <TextBlock Text="SYSTEM HEALTH" FontSize="11" FontWeight="Bold" Foreground="#60FFFFFF"/>
                            <Border x:Name="SystemHealthBadge" Background="#2010B981" CornerRadius="6" Padding="8,3" HorizontalAlignment="Right">
                                <TextBlock x:Name="SystemHealthText" Text="ALL OK" FontSize="9" FontWeight="Bold" Foreground="#10B981"/>
                            </Border>
                        </Grid>

                        <!-- Exchange Status - Beautiful Grid Layout -->
                        <ItemsControl x:Name="ExchangeStatusList">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Columns="2" Rows="3"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Margin="2" CornerRadius="10" Padding="10,8">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                <GradientStop Color="#12FFFFFF" Offset="0"/>
                                                <GradientStop Color="#08FFFFFF" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                        <Border.BorderBrush>
                                            <SolidColorBrush Color="{Binding StatusColor.Color}" Opacity="0.3"/>
                                        </Border.BorderBrush>
                                        <Border.BorderThickness>1</Border.BorderThickness>
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>

                                            <!-- Exchange Icon and Name -->
                                            <StackPanel Orientation="Horizontal">
                                                <controls:ExchangeIcon ExchangeName="{Binding Name}" Size="28" Margin="0,0,8,0"/>
                                                <StackPanel VerticalAlignment="Center">
                                                    <TextBlock Text="{Binding Name}" FontSize="11" FontWeight="Bold" Foreground="White"/>
                                                    <TextBlock Text="{Binding Latency}" FontSize="9" Foreground="#50FFFFFF"/>
                                                </StackPanel>
                                            </StackPanel>

                                            <!-- Status Indicator -->
                                            <Border Grid.Row="1" Margin="0,6,0,0" CornerRadius="6" Padding="6,3" HorizontalAlignment="Left">
                                                <Border.Style>
                                                    <Style TargetType="Border">
                                                        <Setter Property="Background">
                                                            <Setter.Value>
                                                                <SolidColorBrush Color="{Binding StatusColor.Color}" Opacity="0.15"/>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </Border.Style>
                                                <StackPanel Orientation="Horizontal">
                                                    <Ellipse Width="6" Height="6" Fill="{Binding StatusColor}" Margin="0,0,5,0" VerticalAlignment="Center"/>
                                                    <TextBlock Text="{Binding Status}" FontSize="9" FontWeight="SemiBold" Foreground="{Binding StatusColor}"/>
                                                </StackPanel>
                                            </Border>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <!-- Empty State: No Exchanges Connected -->
                        <Border x:Name="NoExchangeConnectedPanel" Visibility="Collapsed"
                                Background="#15EF4444" CornerRadius="12" Padding="20" Margin="0,8,0,0">
                            <StackPanel HorizontalAlignment="Center">
                                <TextBlock Text="⚠️" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                                <TextBlock Text="ยังไม่ได้เชื่อมต่อ Exchange" FontSize="14" FontWeight="SemiBold"
                                           Foreground="#EF4444" HorizontalAlignment="Center"/>
                                <TextBlock Text="กรุณากรอก API Key เพื่อเชื่อมต่อกับ Exchange" FontSize="11"
                                           Foreground="#80FFFFFF" HorizontalAlignment="Center" Margin="0,5,0,12"/>
                                <Button x:Name="GoToSettingsFromDashboard" Click="GoToSettings_Click" Cursor="Hand">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="bg" CornerRadius="8" Padding="16,8">
                                                <Border.Background>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                        <GradientStop Color="#7C3AED" Offset="0"/>
                                                        <GradientStop Color="#5B21B6" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Border.Background>
                                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                    <TextBlock Text="⚙️" FontSize="12" Margin="0,0,6,0"/>
                                                    <TextBlock Text="ไปตั้งค่า API" FontSize="11" FontWeight="SemiBold" Foreground="White"/>
                                                </StackPanel>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="bg" Property="Background">
                                                        <Setter.Value>
                                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                                <GradientStop Color="#8B5CF6" Offset="0"/>
                                                                <GradientStop Color="#7C3AED" Offset="1"/>
                                                            </LinearGradientBrush>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </StackPanel>
                        </Border>

                        <!-- API Rate Limits -->
                        <Border Background="#10FFFFFF" CornerRadius="8" Padding="10,8" Margin="0,6,0,0">
                            <Grid>
                                <StackPanel>
                                    <TextBlock Text="API Rate Limit" FontSize="10" Foreground="#50FFFFFF"/>
                                    <Grid Margin="0,5,0,0">
                                        <Border Background="#20FFFFFF" CornerRadius="3" Height="6"/>
                                        <Border x:Name="ApiRateLimitBar" Background="#7C3AED" CornerRadius="3" Height="6" HorizontalAlignment="Left" Width="60"/>
                                    </Grid>
                                </StackPanel>
                                <TextBlock x:Name="ApiRateLimitText" Text="12%" FontSize="10" Foreground="#7C3AED" FontWeight="SemiBold"
                                           HorizontalAlignment="Right" VerticalAlignment="Top"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Row 1: Key Performance Metrics -->
            <Grid Grid.Row="1" Margin="0,0,0,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Win Rate -->
                <Border Grid.Column="0" Style="{StaticResource StatCard}" Margin="0,0,5,0">
                    <StackPanel>
                        <TextBlock Text="WIN RATE" FontSize="9" Foreground="#50FFFFFF"/>
                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                            <TextBlock x:Name="WinRateValue" Text="0%" FontSize="24" FontWeight="Bold" Foreground="#10B981"/>
                            <TextBlock x:Name="WinRateChange" Text="" FontSize="10" Foreground="#10B981" VerticalAlignment="Bottom" Margin="5,0,0,4"/>
                        </StackPanel>
                        <TextBlock x:Name="WinLossCount" Text="0W / 0L" FontSize="10" Foreground="#60FFFFFF"/>
                    </StackPanel>
                </Border>

                <!-- Profit Factor -->
                <Border Grid.Column="1" Style="{StaticResource StatCard}" Margin="5,0">
                    <StackPanel>
                        <TextBlock Text="PROFIT FACTOR" FontSize="9" Foreground="#50FFFFFF"/>
                        <TextBlock x:Name="ProfitFactorValue" Text="-" FontSize="24" FontWeight="Bold" Foreground="#F59E0B" Margin="0,4,0,0"/>
                        <TextBlock Text="Gross Profit / Loss" FontSize="10" Foreground="#60FFFFFF"/>
                    </StackPanel>
                </Border>

                <!-- Average Win -->
                <Border Grid.Column="2" Style="{StaticResource StatCard}" Margin="5,0">
                    <StackPanel>
                        <TextBlock Text="AVG WIN" FontSize="9" Foreground="#50FFFFFF"/>
                        <TextBlock x:Name="AvgWinValue" Text="$0.00" FontSize="24" FontWeight="Bold" Foreground="#10B981" Margin="0,4,0,0"/>
                        <TextBlock x:Name="LargestWin" Text="Best: $0.00" FontSize="10" Foreground="#60FFFFFF"/>
                    </StackPanel>
                </Border>

                <!-- Average Loss -->
                <Border Grid.Column="3" Style="{StaticResource StatCard}" Margin="5,0">
                    <StackPanel>
                        <TextBlock Text="AVG LOSS" FontSize="9" Foreground="#50FFFFFF"/>
                        <TextBlock x:Name="AvgLossValue" Text="$0.00" FontSize="24" FontWeight="Bold" Foreground="#EF4444" Margin="0,4,0,0"/>
                        <TextBlock x:Name="LargestLoss" Text="Worst: $0.00" FontSize="10" Foreground="#60FFFFFF"/>
                    </StackPanel>
                </Border>

                <!-- Max Drawdown -->
                <Border Grid.Column="4" Style="{StaticResource StatCard}" Margin="5,0">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="MAX DRAWDOWN" FontSize="9" Foreground="#50FFFFFF"/>
                            <Ellipse x:Name="DrawdownIndicator" Width="6" Height="6" Fill="#10B981" Margin="6,0,0,0" VerticalAlignment="Center"/>
                        </StackPanel>
                        <TextBlock x:Name="MaxDrawdownValue" Text="-0.00%" FontSize="24" FontWeight="Bold" Foreground="#10B981" Margin="0,4,0,0"/>
                        <TextBlock x:Name="CurrentDrawdown" Text="Current: -0.00%" FontSize="10" Foreground="#60FFFFFF"/>
                    </StackPanel>
                </Border>

                <!-- Execution Speed -->
                <Border Grid.Column="5" Style="{StaticResource StatCard}" Margin="5,0,0,0">
                    <StackPanel>
                        <TextBlock Text="AVG SPEED" FontSize="9" Foreground="#50FFFFFF"/>
                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                            <TextBlock x:Name="AvgSpeedValue" Text="-" FontSize="24" FontWeight="Bold" Foreground="#00D4FF"/>
                            <TextBlock Text="ms" FontSize="12" Foreground="#60FFFFFF" VerticalAlignment="Bottom" Margin="3,0,0,4"/>
                        </StackPanel>
                        <TextBlock x:Name="SpeedTarget" Text="Target: &lt;500ms" FontSize="10" Foreground="#60FFFFFF"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Row 2: Best & Worst Performing Pair Charts -->
            <Grid Grid.Row="2" Margin="0,0,0,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Best Performing Pair Chart -->
                <Border Grid.Column="0" Style="{StaticResource GlassCard}" Margin="0,0,8,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Chart Header -->
                        <Grid Margin="0,0,0,8">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="BEST PERFORMING" FontSize="11" FontWeight="Bold" Foreground="#60FFFFFF"/>
                                <Border Background="#2010B981" CornerRadius="4" Padding="6,2" Margin="10,0,0,0">
                                    <TextBlock Text="TOP" FontSize="9" FontWeight="Bold" Foreground="#10B981"/>
                                </Border>
                            </StackPanel>
                        </Grid>

                        <!-- Pair Info -->
                        <Border Grid.Row="1" Background="#1010B981" CornerRadius="10" Padding="12,10" Margin="0,0,0,10">
                            <Grid>
                                <StackPanel Orientation="Horizontal">
                                    <controls:CoinIcon x:Name="BestPairIcon" Symbol="BTC" Size="32" Margin="0,0,10,0"/>
                                    <StackPanel VerticalAlignment="Center">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock x:Name="BestPairSymbol" Text="BTC/USDT" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                            <Border Background="#2010B981" CornerRadius="4" Padding="4,2" Margin="8,0,0,0" VerticalAlignment="Center">
                                                <TextBlock x:Name="BestPairRank" Text="#1" FontSize="9" FontWeight="Bold" Foreground="#10B981"/>
                                            </Border>
                                        </StackPanel>
                                        <TextBlock x:Name="BestPairRoute" Text="Binance → KuCoin" FontSize="10" Foreground="#60FFFFFF"/>
                                    </StackPanel>
                                </StackPanel>
                                <StackPanel HorizontalAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock x:Name="BestPairPnL" Text="+$0.00" FontSize="18" FontWeight="Bold" Foreground="#10B981" HorizontalAlignment="Right"/>
                                    <TextBlock x:Name="BestPairChange" Text="+0.00%" FontSize="11" Foreground="#10B981" HorizontalAlignment="Right"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <!-- LiveCharts for Best Pair -->
                        <lvc:CartesianChart x:Name="BestPairChart" Grid.Row="2" MinHeight="150"/>
                    </Grid>
                </Border>

                <!-- Worst Performing Pair Chart -->
                <Border Grid.Column="1" Style="{StaticResource GlassCard}" Margin="8,0,0,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Chart Header -->
                        <Grid Margin="0,0,0,8">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="NEEDS ATTENTION" FontSize="11" FontWeight="Bold" Foreground="#60FFFFFF"/>
                                <Border Background="#20EF4444" CornerRadius="4" Padding="6,2" Margin="10,0,0,0">
                                    <TextBlock Text="WATCH" FontSize="9" FontWeight="Bold" Foreground="#EF4444"/>
                                </Border>
                            </StackPanel>
                        </Grid>

                        <!-- Pair Info -->
                        <Border Grid.Row="1" Background="#15EF4444" CornerRadius="10" Padding="12,10" Margin="0,0,0,10">
                            <Grid>
                                <StackPanel Orientation="Horizontal">
                                    <controls:CoinIcon x:Name="WorstPairIcon" Symbol="ETH" Size="32" Margin="0,0,10,0"/>
                                    <StackPanel VerticalAlignment="Center">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock x:Name="WorstPairSymbol" Text="ETH/USDT" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                            <Border Background="#20EF4444" CornerRadius="4" Padding="4,2" Margin="8,0,0,0" VerticalAlignment="Center">
                                                <TextBlock x:Name="WorstPairRank" Text="LOW" FontSize="9" FontWeight="Bold" Foreground="#EF4444"/>
                                            </Border>
                                        </StackPanel>
                                        <TextBlock x:Name="WorstPairRoute" Text="Bybit → OKX" FontSize="10" Foreground="#60FFFFFF"/>
                                    </StackPanel>
                                </StackPanel>
                                <StackPanel HorizontalAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock x:Name="WorstPairPnL" Text="-$0.00" FontSize="18" FontWeight="Bold" Foreground="#EF4444" HorizontalAlignment="Right"/>
                                    <TextBlock x:Name="WorstPairChange" Text="-0.00%" FontSize="11" Foreground="#EF4444" HorizontalAlignment="Right"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <!-- LiveCharts for Worst Pair -->
                        <lvc:CartesianChart x:Name="WorstPairChart" Grid.Row="2" MinHeight="150"/>
                    </Grid>
                </Border>
            </Grid>

            <!-- Row 3: Performance Chart & Live Monitor (was Row 2) -->
            <Grid Grid.Row="3" Margin="0,0,0,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="380"/>
                </Grid.ColumnDefinitions>

                <!-- P&L Performance Chart -->
                <Border Grid.Column="0" Style="{StaticResource GlassCard}" Margin="0,0,10,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Chart Header -->
                        <Grid Margin="0,0,0,10">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="OVERALL PERFORMANCE" FontSize="11" FontWeight="Bold" Foreground="#60FFFFFF"/>
                                <Border Background="#207C3AED" CornerRadius="4" Padding="6,2" Margin="10,0,0,0">
                                    <TextBlock Text="LIVE" FontSize="9" FontWeight="Bold" Foreground="#7C3AED"/>
                                </Border>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <RadioButton x:Name="Chart1D" Content="1D" Style="{StaticResource TabButton}" GroupName="ChartPeriod" IsChecked="True"/>
                                <RadioButton x:Name="Chart7D" Content="7D" Style="{StaticResource TabButton}" GroupName="ChartPeriod"/>
                                <RadioButton x:Name="Chart30D" Content="30D" Style="{StaticResource TabButton}" GroupName="ChartPeriod"/>
                                <RadioButton x:Name="ChartAll" Content="ALL" Style="{StaticResource TabButton}" GroupName="ChartPeriod"/>
                            </StackPanel>
                        </Grid>

                        <!-- LiveCharts Performance Chart -->
                        <lvc:CartesianChart x:Name="PerformanceChart" Grid.Row="1" MinHeight="200"/>
                    </Grid>
                </Border>

                <!-- Live Arbitrage Monitor -->
                <Border Grid.Column="1" Style="{StaticResource GlassCard}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Grid Margin="0,0,0,12">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="LIVE MONITOR" FontSize="11" FontWeight="Bold" Foreground="#60FFFFFF"/>
                                <Border x:Name="LiveIndicatorBadge" Background="#2010B981" CornerRadius="6" Padding="6,2" Margin="10,0,0,0">
                                    <StackPanel Orientation="Horizontal">
                                        <Ellipse x:Name="LiveIndicatorDot" Width="6" Height="6" Fill="#10B981" Margin="0,0,5,0"/>
                                        <TextBlock x:Name="LiveIndicatorText" Text="IDLE" FontSize="9" FontWeight="Bold" Foreground="#10B981"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                            <TextBlock x:Name="LastUpdateTime" Text="--:--:--" FontSize="10" Foreground="#50FFFFFF" HorizontalAlignment="Right"/>
                        </Grid>

                        <StackPanel Grid.Row="1">
                            <!-- Current Spread Display -->
                            <Border Background="#15FFFFFF" CornerRadius="12" Padding="15" Margin="0,0,0,12">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Buy Exchange -->
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <controls:ExchangeIcon x:Name="BuyExchangeIcon" ExchangeName="Binance" Size="28" Margin="0,0,8,0"/>
                                            <StackPanel VerticalAlignment="Center">
                                                <TextBlock x:Name="BuyExchangeName" Text="BINANCE" FontSize="10" FontWeight="Bold" Foreground="#F3BA2F"/>
                                                <TextBlock Text="BUY" FontSize="8" Foreground="#50FFFFFF"/>
                                            </StackPanel>
                                        </StackPanel>
                                        <TextBlock x:Name="BuyPrice" Text="$0.00" FontSize="18" FontWeight="Bold" Foreground="White" Margin="0,8,0,0"/>
                                    </StackPanel>

                                    <!-- Spread -->
                                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="15,0">
                                        <Border x:Name="SpreadBorder" CornerRadius="10" Padding="15,10">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="#7C3AED" Offset="0"/>
                                                    <GradientStop Color="#5B21B6" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <StackPanel>
                                                <TextBlock Text="SPREAD" FontSize="8" Foreground="#AAFFFFFF" HorizontalAlignment="Center"/>
                                                <TextBlock x:Name="SpreadValue" Text="0.00%" FontSize="20" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
                                                <TextBlock x:Name="SpreadAmount" Text="$0.00" FontSize="10" Foreground="#DDFFFFFF" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                        </Border>
                                    </StackPanel>

                                    <!-- Sell Exchange -->
                                    <StackPanel Grid.Column="2" HorizontalAlignment="Right">
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Right">
                                                <TextBlock x:Name="SellExchangeName" Text="KUCOIN" FontSize="10" FontWeight="Bold" Foreground="#23AF91" HorizontalAlignment="Right"/>
                                                <TextBlock Text="SELL" FontSize="8" Foreground="#50FFFFFF" HorizontalAlignment="Right"/>
                                            </StackPanel>
                                            <controls:ExchangeIcon x:Name="SellExchangeIcon" ExchangeName="KuCoin" Size="28" Margin="8,0,0,0"/>
                                        </StackPanel>
                                        <TextBlock x:Name="SellPrice" Text="$0.00" FontSize="18" FontWeight="Bold" Foreground="White" HorizontalAlignment="Right" Margin="0,8,0,0"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- Trading Status -->
                            <Border x:Name="TradingStatusBorder" Background="#15FFFFFF" CornerRadius="10" Padding="12,10" Margin="0,0,0,12">
                                <Grid>
                                    <StackPanel Orientation="Horizontal">
                                        <Ellipse x:Name="TradingStatusDot" Width="10" Height="10" Fill="#808080" Margin="0,0,10,0"/>
                                        <TextBlock x:Name="TradingStatusText" Text="Waiting for bot to start..." FontSize="12" Foreground="#80FFFFFF"/>
                                    </StackPanel>
                                    <TextBlock x:Name="ScanCount" Text="Scans: 0" FontSize="10" Foreground="#50FFFFFF" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>

                            <!-- Mini Spread History -->
                            <Border Background="#10FFFFFF" CornerRadius="10" Padding="12">
                                <StackPanel>
                                    <Grid Margin="0,0,0,8">
                                        <TextBlock Text="SPREAD HISTORY" FontSize="9" FontWeight="Bold" Foreground="#50FFFFFF"/>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                            <TextBlock x:Name="SpreadMin" Text="Min: 0%" FontSize="9" Foreground="#60FFFFFF" Margin="0,0,10,0"/>
                                            <TextBlock x:Name="SpreadMax" Text="Max: 0%" FontSize="9" Foreground="#7C3AED" FontWeight="SemiBold"/>
                                        </StackPanel>
                                    </Grid>
                                    <lvc:CartesianChart x:Name="SpreadHistoryChart" Height="60"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>

            <!-- Row 4: Market Overview & Trading Pairs -->
            <Grid Grid.Row="4" Margin="0,0,0,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="350"/>
                </Grid.ColumnDefinitions>

                <!-- Market Overview -->
                <Border Grid.Column="0" Style="{StaticResource GlassCard}" Margin="0,0,10,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Grid Margin="0,0,0,12">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="MARKET OVERVIEW" FontSize="11" FontWeight="Bold" Foreground="#60FFFFFF"/>
                                <Border Background="#2000D4FF" CornerRadius="4" Padding="6,2" Margin="10,0,0,0">
                                    <TextBlock Text="REAL-TIME" FontSize="9" FontWeight="Bold" Foreground="#00D4FF"/>
                                </Border>
                            </StackPanel>
                            <Button Content="View All" Style="{StaticResource ActionButton}" HorizontalAlignment="Right" Padding="12,6"/>
                        </Grid>

                        <ItemsControl x:Name="MarketOverviewList" Grid.Row="1">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="#10FFFFFF" CornerRadius="10" Padding="12,10" Margin="0,0,0,8">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>

                                            <!-- Coin Icon & Name -->
                                            <controls:CoinIcon Symbol="{Binding Symbol}" Size="36" Margin="0,0,12,0"/>
                                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="{Binding Symbol}" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                                    <TextBlock Text="/USDT" FontSize="12" Foreground="#60FFFFFF" VerticalAlignment="Bottom"/>
                                                </StackPanel>
                                                <TextBlock Text="{Binding Name}" FontSize="10" Foreground="#60FFFFFF"/>
                                            </StackPanel>

                                            <!-- Price -->
                                            <StackPanel Grid.Column="2" VerticalAlignment="Center" MinWidth="100" Margin="0,0,20,0">
                                                <TextBlock Text="{Binding Price}" FontSize="14" FontWeight="SemiBold" Foreground="White" HorizontalAlignment="Right"/>
                                                <TextBlock Text="{Binding Change24h}" FontSize="11" Foreground="{Binding ChangeColor}" HorizontalAlignment="Right"/>
                                            </StackPanel>

                                            <!-- Spread -->
                                            <StackPanel Grid.Column="3" VerticalAlignment="Center" MinWidth="80" Margin="0,0,15,0">
                                                <TextBlock Text="SPREAD" FontSize="8" Foreground="#50FFFFFF" HorizontalAlignment="Center"/>
                                                <TextBlock Text="{Binding BestSpread}" FontSize="14" FontWeight="Bold" Foreground="{Binding SpreadColor}" HorizontalAlignment="Center"/>
                                            </StackPanel>

                                            <!-- Score & Action -->
                                            <StackPanel Grid.Column="4" Orientation="Horizontal">
                                                <Border Background="{Binding ScoreBgColor}" CornerRadius="6" Padding="10,5" Margin="0,0,10,0">
                                                    <TextBlock Text="{Binding Score}" FontSize="11" FontWeight="Bold" Foreground="{Binding ScoreColor}"/>
                                                </Border>
                                                <Button Content="Trade" Style="{StaticResource ActionButton}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </Grid>
                </Border>

                <!-- Active Trading Pairs & Quick Actions -->
                <Border Grid.Column="1" Style="{StaticResource GlassCard}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Grid Margin="0,0,0,12">
                            <TextBlock Text="ACTIVE PAIRS" FontSize="11" FontWeight="Bold" Foreground="#60FFFFFF"/>
                            <Button Content="+ Add" Style="{StaticResource ActionButton}" HorizontalAlignment="Right" Padding="10,5"
                                    Click="AddPairButton_Click"/>
                        </Grid>

                        <ItemsControl x:Name="ActivePairsList" Grid.Row="1">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="#15FFFFFF" CornerRadius="10" Padding="12" Margin="0,0,0,8">
                                        <Grid>
                                            <StackPanel Orientation="Horizontal">
                                                <controls:CoinIcon Symbol="{Binding Symbol}" Size="32" Margin="0,0,10,0"/>
                                                <StackPanel VerticalAlignment="Center">
                                                    <TextBlock Text="{Binding DisplayName}" FontWeight="SemiBold" Foreground="White"/>
                                                    <TextBlock Text="{Binding Route}" FontSize="10" Foreground="#60FFFFFF"/>
                                                </StackPanel>
                                            </StackPanel>
                                            <StackPanel HorizontalAlignment="Right" VerticalAlignment="Center">
                                                <Border Background="{Binding StatusBgColor}" CornerRadius="4" Padding="8,3">
                                                    <TextBlock Text="{Binding Status}" FontSize="9" FontWeight="Bold" Foreground="{Binding StatusColor}"/>
                                                </Border>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <!-- Quick Actions -->
                        <Border Grid.Row="2" Background="#10FFFFFF" CornerRadius="10" Padding="12" Margin="0,12,0,0">
                            <StackPanel>
                                <TextBlock Text="QUICK ACTIONS" FontSize="9" FontWeight="Bold" Foreground="#50FFFFFF" Margin="0,0,0,10"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Button x:Name="EmergencyStopButton" Content="⚠ Emergency Stop" Margin="0,0,5,0"
                                            Click="EmergencyStopButton_Click" Cursor="Hand">
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="#20EF4444" CornerRadius="8" Padding="10,8" Cursor="Hand">
                                                    <TextBlock Text="{TemplateBinding Content}" FontSize="10" FontWeight="SemiBold"
                                                               Foreground="#EF4444" HorizontalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                    <Button x:Name="RefreshButton" Grid.Column="1" Content="↻ Refresh Data" Margin="5,0,0,0"
                                            Click="RefreshButton_Click" Cursor="Hand">
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="#2000D4FF" CornerRadius="8" Padding="10,8" Cursor="Hand">
                                                    <TextBlock Text="{TemplateBinding Content}" FontSize="10" FontWeight="SemiBold"
                                                               Foreground="#00D4FF" HorizontalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Border>
            </Grid>

            <!-- Row 5: Recent Trades & Activity Log -->
            <Grid Grid.Row="5" MinHeight="300">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="380"/>
                </Grid.ColumnDefinitions>

                <!-- Recent Trades -->
                <Border Grid.Column="0" Style="{StaticResource GlassCard}" Margin="0,0,10,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Grid Margin="0,0,0,12">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="RECENT TRADES" FontSize="11" FontWeight="Bold" Foreground="#60FFFFFF"/>
                                <TextBlock x:Name="RecentTradesCount" Text="(0)" FontSize="11" Foreground="#50FFFFFF" Margin="8,0,0,0"/>
                            </StackPanel>
                            <Button Content="View All" Style="{StaticResource ActionButton}" HorizontalAlignment="Right" Padding="12,6"
                                    Click="ViewAllTradesButton_Click"/>
                        </Grid>

                        <ScrollViewer Grid.Row="1" Style="{StaticResource PremiumScrollViewer}" MaxHeight="250">
                            <ItemsControl x:Name="RecentTradesList">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{Binding BackgroundColor}" CornerRadius="10" Padding="12,10" Margin="0,0,0,6">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <!-- Coin Icon -->
                                                <controls:CoinIcon Symbol="{Binding Symbol}" Size="32" Margin="0,0,12,0"/>

                                                <!-- Trade Info -->
                                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="{Binding Symbol}" FontSize="13" FontWeight="SemiBold" Foreground="White"/>
                                                        <TextBlock Text="/USDT" FontSize="11" Foreground="#60FFFFFF" VerticalAlignment="Bottom"/>
                                                    </StackPanel>
                                                    <TextBlock Text="{Binding Route}" FontSize="10" Foreground="#60FFFFFF"/>
                                                </StackPanel>

                                                <!-- Time & Spread -->
                                                <StackPanel Grid.Column="2" VerticalAlignment="Center" Margin="0,0,15,0" MinWidth="80">
                                                    <TextBlock Text="{Binding Time}" FontSize="10" Foreground="#80FFFFFF" HorizontalAlignment="Right"/>
                                                    <TextBlock Text="{Binding Spread}" FontSize="10" Foreground="#7C3AED" HorizontalAlignment="Right"/>
                                                </StackPanel>

                                                <!-- P&L -->
                                                <StackPanel Grid.Column="3" VerticalAlignment="Center" MinWidth="80">
                                                    <TextBlock Text="{Binding PnL}" FontSize="15" FontWeight="Bold" Foreground="{Binding PnLColor}" HorizontalAlignment="Right"/>
                                                    <TextBlock Text="{Binding ExecutionTime}" FontSize="9" Foreground="#60FFFFFF" HorizontalAlignment="Right"/>
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Border>

                <!-- Activity Log -->
                <Border Grid.Column="1" Style="{StaticResource GlassCard}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Grid Margin="0,0,0,12">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="ACTIVITY LOG" FontSize="11" FontWeight="Bold" Foreground="#60FFFFFF"/>
                                <Border x:Name="NewActivityBadge" Background="#20EF4444" CornerRadius="8" Padding="6,2" Margin="10,0,0,0" Visibility="Collapsed">
                                    <TextBlock x:Name="NewActivityCount" Text="3 new" FontSize="9" FontWeight="Bold" Foreground="#EF4444"/>
                                </Border>
                            </StackPanel>
                            <Button Content="Clear" Cursor="Hand" HorizontalAlignment="Right" Click="ClearLogButton_Click">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <TextBlock Text="{TemplateBinding Content}" FontSize="11" Foreground="#60FFFFFF" Cursor="Hand">
                                            <TextBlock.Style>
                                                <Style TargetType="TextBlock">
                                                    <Style.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Foreground" Value="#7C3AED"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                        </Grid>

                        <ScrollViewer Grid.Row="1" Style="{StaticResource PremiumScrollViewer}" MaxHeight="250">
                            <ItemsControl x:Name="ActivityLogList">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="#08FFFFFF" CornerRadius="6" Padding="10,8" Margin="0,0,0,4">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <Ellipse Width="8" Height="8" Fill="{Binding IconColor}" Margin="0,5,10,0" VerticalAlignment="Top"/>
                                                <StackPanel Grid.Column="1">
                                                    <TextBlock Text="{Binding Message}" FontSize="11" Foreground="White" TextWrapping="Wrap"/>
                                                    <TextBlock Text="{Binding Details}" FontSize="9" Foreground="#50FFFFFF" TextWrapping="Wrap" Margin="0,2,0,0"
                                                               Visibility="{Binding DetailsVisibility}"/>
                                                </StackPanel>
                                                <TextBlock Grid.Column="2" Text="{Binding Time}" FontSize="9" Foreground="#40FFFFFF" VerticalAlignment="Top"/>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Border>
            </Grid>
            </Grid>
        </ScrollViewer>
    </Grid>
</UserControl>
