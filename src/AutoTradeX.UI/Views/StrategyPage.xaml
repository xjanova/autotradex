<UserControl x:Class="AutoTradeX.UI.Views.StrategyPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="clr-namespace:AutoTradeX.UI.Controls">

    <UserControl.Resources>
        <Style x:Key="GlassCard" TargetType="Border">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#20FFFFFF" Offset="0"/>
                        <GradientStop Color="#10FFFFFF" Offset="1"/>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderBrush" Value="#30FFFFFF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.3" Color="#000000"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SectionTitle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#60FFFFFF"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
        </Style>

        <Style x:Key="FieldLabel" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Foreground" Value="#80FFFFFF"/>
            <Setter Property="Margin" Value="0,0,0,4"/>
        </Style>

        <Style x:Key="DarkTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="#15FFFFFF"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#30FFFFFF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="CaretBrush" Value="#00D4FF"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8" Padding="{TemplateBinding Padding}">
                            <ScrollViewer x:Name="PART_ContentHost" Focusable="False"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#7C3AED"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ActionButton" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="8" Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.85"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Opacity" Value="0.4"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ToggleSwitch" TargetType="CheckBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Grid>
                            <Border x:Name="track" Width="44" Height="24" CornerRadius="12" Background="#30FFFFFF" HorizontalAlignment="Left"/>
                            <Border x:Name="thumb" Width="20" Height="20" CornerRadius="10" Background="White" HorizontalAlignment="Left" Margin="2,0,0,0"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="track" Property="Background" Value="#10B981"/>
                                <Setter TargetName="thumb" Property="Margin" Value="22,0,0,0"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Premium ScrollBar Styles -->
        <Style x:Key="PremiumScrollBarThumb" TargetType="Thumb">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Thumb">
                        <Border x:Name="thumb" CornerRadius="5" MinHeight="40" Width="8" HorizontalAlignment="Center">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Color="#8B5CF6" Offset="0"/>
                                    <GradientStop Color="#7C3AED" Offset="0.5"/>
                                    <GradientStop Color="#6D28D9" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PremiumScrollBar" TargetType="ScrollBar">
            <Setter Property="Width" Value="10"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollBar">
                        <Grid Width="10" Margin="2,4,6,4">
                            <Border Background="#15FFFFFF" CornerRadius="5" Width="8" HorizontalAlignment="Center"/>
                            <Track x:Name="PART_Track" IsDirectionReversed="True" Width="10">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.PageUpCommand">
                                        <RepeatButton.Template>
                                            <ControlTemplate><Border Background="Transparent"/></ControlTemplate>
                                        </RepeatButton.Template>
                                    </RepeatButton>
                                </Track.DecreaseRepeatButton>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.PageDownCommand">
                                        <RepeatButton.Template>
                                            <ControlTemplate><Border Background="Transparent"/></ControlTemplate>
                                        </RepeatButton.Template>
                                    </RepeatButton>
                                </Track.IncreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb Style="{StaticResource PremiumScrollBarThumb}" Width="8"/>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PremiumScrollViewer" TargetType="ScrollViewer">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollViewer">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <ScrollContentPresenter Grid.Column="0"/>
                            <ScrollBar x:Name="PART_VerticalScrollBar" Grid.Column="1" Orientation="Vertical"
                                       Style="{StaticResource PremiumScrollBar}"
                                       Maximum="{TemplateBinding ScrollableHeight}"
                                       Value="{TemplateBinding VerticalOffset}"
                                       ViewportSize="{TemplateBinding ViewportHeight}"
                                       Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="280"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Left Panel - Strategy List -->
        <Border Grid.Column="0" Style="{StaticResource GlassCard}" Margin="0,0,10,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <Grid Grid.Row="0" Margin="0,0,0,15">
                    <StackPanel>
                        <TextBlock Text="AI TRADING STRATEGIES" Style="{StaticResource SectionTitle}" Margin="0"/>
                        <TextBlock Text="Configure how the AI trades" FontSize="10" Foreground="#50FFFFFF"/>
                    </StackPanel>
                </Grid>

                <!-- Strategy List -->
                <ScrollViewer Grid.Row="1" Style="{StaticResource PremiumScrollViewer}" VerticalScrollBarVisibility="Auto">
                    <ListBox x:Name="StrategyList" Background="Transparent" BorderThickness="0"
                             SelectionChanged="StrategyList_SelectionChanged">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Background="#15FFFFFF" CornerRadius="10" Padding="12" Margin="0,0,0,8" Cursor="Hand">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- AI Icon -->
                                        <Border Width="36" Height="36" CornerRadius="8" Margin="0,0,12,0">
                                            <Border.Background>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="#207C3AED" Offset="0"/>
                                                    <GradientStop Color="#107C3AED" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Border.Background>
                                            <TextBlock Text="AI" FontSize="12" FontWeight="Bold" Foreground="#7C3AED"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>

                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding Name}" FontWeight="SemiBold" Foreground="White" FontSize="13"/>
                                            <TextBlock Text="{Binding AI.ModelType}" FontSize="10" Foreground="#60FFFFFF"/>
                                        </StackPanel>

                                        <Border Grid.Column="2" Background="{Binding StatusColor}" CornerRadius="4" Padding="6,2">
                                            <TextBlock Text="{Binding StatusText}" FontSize="9" Foreground="White"/>
                                        </Border>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </ScrollViewer>

                <!-- Actions -->
                <StackPanel Grid.Row="2" Margin="0,15,0,0">
                    <Button x:Name="NewStrategyButton" Content="+ New Strategy" Click="NewStrategyButton_Click"
                            Style="{StaticResource ActionButton}">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#7C3AED" Offset="0"/>
                                <GradientStop Color="#5B21B6" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>
                    <Grid Margin="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Button x:Name="ImportButton" Content="Import" Grid.Column="0" Margin="0,0,5,0"
                                Click="ImportButton_Click" Style="{StaticResource ActionButton}" Background="#30FFFFFF"/>
                        <Button x:Name="ExportButton" Content="Export" Grid.Column="1" Margin="5,0,0,0"
                                Click="ExportButton_Click" Style="{StaticResource ActionButton}" Background="#30FFFFFF"/>
                    </Grid>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Right Panel - Strategy Editor -->
        <Border Grid.Column="1" Style="{StaticResource GlassCard}">
            <ScrollViewer Style="{StaticResource PremiumScrollViewer}" VerticalScrollBarVisibility="Auto">
                <Grid x:Name="StrategyEditorPanel">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Strategy Header -->
                    <Grid Grid.Row="0" Margin="0,0,0,20">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBox x:Name="StrategyNameInput" Text="New Strategy" FontSize="20" FontWeight="Bold"
                                         Background="Transparent" Foreground="White" BorderThickness="0"
                                         CaretBrush="#00D4FF"/>
                                <Border Background="#207C3AED" CornerRadius="6" Padding="8,4" Margin="10,0,0,0" VerticalAlignment="Center">
                                    <TextBlock x:Name="StrategyModelType" Text="Balanced" FontSize="10" FontWeight="Bold" Foreground="#7C3AED"/>
                                </Border>
                            </StackPanel>
                            <TextBox x:Name="StrategyDescriptionInput" Text="Strategy description..." FontSize="11"
                                     Background="Transparent" Foreground="#60FFFFFF" BorderThickness="0" Margin="0,5,0,0"/>
                        </StackPanel>
                        <Button x:Name="DeleteStrategyButton" Content="Delete" HorizontalAlignment="Right" VerticalAlignment="Top"
                                Click="DeleteStrategyButton_Click" Style="{StaticResource ActionButton}" Background="#30EF4444"/>
                    </Grid>

                    <!-- Strategy Settings Tabs -->
                    <TabControl x:Name="SettingsTabs" Grid.Row="1" Background="Transparent" BorderThickness="0">
                        <TabControl.Resources>
                            <Style TargetType="TabItem">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="Foreground" Value="#60FFFFFF"/>
                                <Setter Property="Padding" Value="15,8"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="TabItem">
                                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                                    CornerRadius="8,8,0,0" Padding="{TemplateBinding Padding}">
                                                <ContentPresenter ContentSource="Header"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsSelected" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="#20FFFFFF"/>
                                                    <Setter Property="Foreground" Value="#00D4FF"/>
                                                </Trigger>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="border" Property="Background" Value="#15FFFFFF"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </TabControl.Resources>

                        <!-- Entry Conditions Tab -->
                        <TabItem Header="Entry Conditions">
                            <Border Background="#10FFFFFF" CornerRadius="0,12,12,12" Padding="20">
                                <StackPanel>
                                    <TextBlock Text="SPREAD CONDITIONS" Style="{StaticResource SectionTitle}"/>

                                    <Grid Margin="0,0,0,15">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Minimum Spread (%)" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="MinSpreadInput" Text="0.15" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                            <TextBlock Text="Maximum Spread (%)" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="MaxSpreadInput" Text="5.0" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>
                                    </Grid>

                                    <Grid Margin="0,0,0,15">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Min 24h Volume ($)" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="MinVolumeInput" Text="100000" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                            <TextBlock Text="Confirmation Time (sec)" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="ConfirmationTimeInput" Text="3" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>
                                    </Grid>

                                    <TextBlock Text="FILTERS" Style="{StaticResource SectionTitle}" Margin="0,10,0,12"/>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Check Momentum" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="CheckMomentumToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Avoid High Volatility" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="AvoidVolatilityToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Check Order Book Depth" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="CheckOrderBookToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </TabItem>

                        <!-- Exit Conditions Tab -->
                        <TabItem Header="Exit Conditions">
                            <Border Background="#10FFFFFF" CornerRadius="0,12,12,12" Padding="20">
                                <StackPanel>
                                    <TextBlock Text="PROFIT TARGETS" Style="{StaticResource SectionTitle}"/>

                                    <Grid Margin="0,0,0,15">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Take Profit (%)" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="TakeProfitInput" Text="0.5" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                            <TextBlock Text="Stop Loss (%)" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="StopLossInput" Text="0.3" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>
                                    </Grid>

                                    <TextBlock Text="TRAILING STOP" Style="{StaticResource SectionTitle}" Margin="0,10,0,12"/>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Enable Trailing Stop" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="TrailingStopToggle" IsChecked="False" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>

                                    <Grid x:Name="TrailingStopSettings" Margin="0,0,0,15" Opacity="0.5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Activation (%)" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="TrailingActivationInput" Text="0.3" Style="{StaticResource DarkTextBox}" IsEnabled="False"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                            <TextBlock Text="Distance (%)" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="TrailingDistanceInput" Text="0.1" Style="{StaticResource DarkTextBox}" IsEnabled="False"/>
                                        </StackPanel>
                                    </Grid>

                                    <TextBlock Text="TIME LIMITS" Style="{StaticResource SectionTitle}" Margin="0,10,0,12"/>

                                    <StackPanel Margin="0,0,0,15">
                                        <TextBlock Text="Max Hold Time (minutes, 0 = unlimited)" Style="{StaticResource FieldLabel}"/>
                                        <TextBox x:Name="MaxHoldTimeInput" Text="30" Style="{StaticResource DarkTextBox}"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </TabItem>

                        <!-- Risk Management Tab -->
                        <TabItem Header="Risk Management">
                            <Border Background="#10FFFFFF" CornerRadius="0,12,12,12" Padding="20">
                                <StackPanel>
                                    <TextBlock Text="POSITION LIMITS" Style="{StaticResource SectionTitle}"/>

                                    <Grid Margin="0,0,0,15">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Max Position Size ($)" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="MaxPositionInput" Text="1000" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                            <TextBlock Text="Max % of Balance" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="MaxBalancePercentInput" Text="10" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>
                                    </Grid>

                                    <Grid Margin="0,0,0,15">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Max Open Positions" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="MaxOpenPositionsInput" Text="3" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                            <TextBlock Text="Max Trades/Hour" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="MaxTradesHourInput" Text="10" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>
                                    </Grid>

                                    <TextBlock Text="LOSS PROTECTION" Style="{StaticResource SectionTitle}" Margin="0,10,0,12"/>

                                    <Grid Margin="0,0,0,15">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Max Daily Loss ($)" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="MaxDailyLossInput" Text="100" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                            <TextBlock Text="Max Consecutive Losses" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="MaxConsecutiveLossesInput" Text="3" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>
                                    </Grid>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Enable Drawdown Protection" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="DrawdownProtectionToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </TabItem>

                        <!-- AI Settings Tab -->
                        <TabItem Header="AI Settings">
                            <Border Background="#10FFFFFF" CornerRadius="0,12,12,12" Padding="20">
                                <StackPanel>
                                    <TextBlock Text="AI CONFIGURATION" Style="{StaticResource SectionTitle}"/>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Enable AI Trading" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="EnableAIToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>

                                    <StackPanel Margin="0,0,0,15">
                                        <TextBlock Text="AI Model Type" Style="{StaticResource FieldLabel}"/>
                                        <ComboBox x:Name="AIModelTypeCombo" Background="#15FFFFFF" Foreground="White"
                                                  Padding="10,8" SelectedIndex="1">
                                            <ComboBoxItem Content="Conservative"/>
                                            <ComboBoxItem Content="Balanced"/>
                                            <ComboBoxItem Content="Aggressive"/>
                                            <ComboBoxItem Content="Scalping"/>
                                            <ComboBoxItem Content="Custom"/>
                                        </ComboBox>
                                    </StackPanel>

                                    <StackPanel Margin="0,0,0,15">
                                        <TextBlock Text="Min Confidence Score (0-100)" Style="{StaticResource FieldLabel}"/>
                                        <TextBox x:Name="MinConfidenceInput" Text="70" Style="{StaticResource DarkTextBox}"/>
                                    </StackPanel>

                                    <TextBlock Text="AI FEATURES" Style="{StaticResource SectionTitle}" Margin="0,10,0,12"/>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Use Market Sentiment" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="UseSentimentToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Use Pattern Recognition" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="UsePatternToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Enable Adaptive Learning" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="AdaptiveLearningToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Use Historical Prediction" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="HistoricalPredictionToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </TabItem>

                        <!-- Advanced Tab -->
                        <TabItem Header="Advanced">
                            <Border Background="#10FFFFFF" CornerRadius="0,12,12,12" Padding="20">
                                <StackPanel>
                                    <TextBlock Text="ORDER EXECUTION" Style="{StaticResource SectionTitle}"/>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Enable Slippage Protection" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="SlippageProtectionToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,15">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                            <TextBlock Text="Max Slippage (%)" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="MaxSlippageInput" Text="0.1" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                            <TextBlock Text="Order Timeout (sec)" Style="{StaticResource FieldLabel}"/>
                                            <TextBox x:Name="OrderTimeoutInput" Text="10" Style="{StaticResource DarkTextBox}"/>
                                        </StackPanel>
                                    </Grid>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Use Limit Orders (instead of Market)" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="UseLimitOrdersToggle" IsChecked="False" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Split Large Orders" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="SplitOrdersToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Retry Failed Orders" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="RetryOrdersToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>

                                    <TextBlock Text="FEE OPTIMIZATION" Style="{StaticResource SectionTitle}" Margin="0,15,0,12"/>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Enable Fee Optimization" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="FeeOptimizationToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>

                                    <Grid Margin="0,0,0,10">
                                        <TextBlock Text="Prefer Lower Fee Exchanges" Style="{StaticResource FieldLabel}" VerticalAlignment="Center"/>
                                        <CheckBox x:Name="PreferLowerFeesToggle" IsChecked="True" HorizontalAlignment="Right"
                                                  Style="{StaticResource ToggleSwitch}"/>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </TabItem>
                    </TabControl>

                    <!-- Save Button -->
                    <Grid Grid.Row="2" Margin="0,20,0,0">
                        <Button x:Name="SaveStrategyButton" Content="Save Strategy" Click="SaveStrategyButton_Click"
                                Style="{StaticResource ActionButton}" HorizontalAlignment="Right" Padding="30,12">
                            <Button.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#10B981" Offset="0"/>
                                    <GradientStop Color="#059669" Offset="1"/>
                                </LinearGradientBrush>
                            </Button.Background>
                        </Button>
                    </Grid>
                </Grid>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>
