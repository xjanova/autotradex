<Window x:Class="AutoTradeX.UI.Views.AddPairDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Add Trading Pair"
        Height="550" Width="450"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">

    <Window.Resources>
        <!-- Dark ComboBox Style -->
        <Style x:Key="DarkComboBox" TargetType="ComboBox">
            <Setter Property="Background" Value="#1A1A2E"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#40FFFFFF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <Border x:Name="border" Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="10">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="30"/>
                                    </Grid.ColumnDefinitions>
                                    <ContentPresenter Grid.Column="0"
                                                     Content="{TemplateBinding SelectionBoxItem}"
                                                     ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                     VerticalAlignment="Center"
                                                     Margin="10,0,0,0"/>
                                    <Path Grid.Column="1"
                                          Data="M0,0 L4,4 L8,0"
                                          Stroke="#80FFFFFF"
                                          StrokeThickness="1.5"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center"/>
                                    <ToggleButton Grid.ColumnSpan="2"
                                                 IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                 Background="Transparent"
                                                 BorderThickness="0"
                                                 Focusable="False"
                                                 ClickMode="Press"/>
                                </Grid>
                            </Border>
                            <Popup x:Name="PART_Popup"
                                   IsOpen="{TemplateBinding IsDropDownOpen}"
                                   Placement="Bottom"
                                   AllowsTransparency="True"
                                   PopupAnimation="Slide">
                                <Border Background="#1A1A2E"
                                        BorderBrush="#50FFFFFF"
                                        BorderThickness="1"
                                        CornerRadius="10"
                                        Margin="0,4,0,0">
                                    <Border.Effect>
                                        <DropShadowEffect BlurRadius="20" ShadowDepth="5" Opacity="0.5" Color="#000000"/>
                                    </Border.Effect>
                                    <ScrollViewer MaxHeight="200" VerticalScrollBarVisibility="Auto">
                                        <ItemsPresenter/>
                                    </ScrollViewer>
                                </Border>
                            </Popup>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#7C3AED"/>
                                <Setter TargetName="border" Property="Background" Value="#252540"/>
                            </Trigger>
                            <Trigger Property="IsDropDownOpen" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#00D4FF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemContainerStyle">
                <Setter.Value>
                    <Style TargetType="ComboBoxItem">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="Padding" Value="12,10"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ComboBoxItem">
                                    <Border x:Name="border" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                                        <ContentPresenter/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="border" Property="Background" Value="#2A2A45"/>
                                        </Trigger>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="border" Property="Background" Value="#353555"/>
                                            <Setter Property="Foreground" Value="#00D4FF"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border CornerRadius="16" Padding="2">
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#2D1B4E" Offset="0"/>
                <GradientStop Color="#1A1A2E" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        <Border.Effect>
            <DropShadowEffect BlurRadius="30" ShadowDepth="0" Opacity="0.5" Color="#000000"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0" Margin="25,20,25,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel>
                    <TextBlock Text="Add Trading Pair" FontSize="22" FontWeight="Bold" Foreground="White"/>
                    <TextBlock Text="Configure a new arbitrage trading pair" FontSize="12" Foreground="#60FFFFFF" Margin="0,5,0,0"/>
                </StackPanel>

                <Button Grid.Column="1" Content="X" Width="30" Height="30" Click="CloseButton_Click"
                        Background="Transparent" Foreground="#60FFFFFF" BorderThickness="0"
                        FontSize="16" FontWeight="Bold" Cursor="Hand" VerticalAlignment="Top"/>
            </Grid>

            <!-- Content -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="25,10">
                <StackPanel>
                    <!-- Pair Selection -->
                    <TextBlock Text="TRADING PAIR" FontSize="11" FontWeight="Bold" Foreground="#60FFFFFF" Margin="0,0,0,10"/>

                    <Grid Margin="0,0,0,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="40"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel>
                            <TextBlock Text="Base Asset" FontSize="10" Foreground="#80FFFFFF" Margin="0,0,0,5"/>
                            <ComboBox x:Name="BaseAssetCombo" Style="{StaticResource DarkComboBox}">
                                <ComboBoxItem Content="BTC" IsSelected="True"/>
                                <ComboBoxItem Content="ETH"/>
                                <ComboBoxItem Content="SOL"/>
                                <ComboBoxItem Content="XRP"/>
                                <ComboBoxItem Content="DOGE"/>
                                <ComboBoxItem Content="ADA"/>
                                <ComboBoxItem Content="AVAX"/>
                                <ComboBoxItem Content="DOT"/>
                                <ComboBoxItem Content="MATIC"/>
                                <ComboBoxItem Content="LINK"/>
                            </ComboBox>
                        </StackPanel>

                        <TextBlock Grid.Column="1" Text="/" FontSize="24" FontWeight="Bold" Foreground="#40FFFFFF"
                                  HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,15,0,0"/>

                        <StackPanel Grid.Column="2">
                            <TextBlock Text="Quote Asset" FontSize="10" Foreground="#80FFFFFF" Margin="0,0,0,5"/>
                            <ComboBox x:Name="QuoteAssetCombo" Style="{StaticResource DarkComboBox}">
                                <ComboBoxItem Content="USDT" IsSelected="True"/>
                                <ComboBoxItem Content="USDC"/>
                                <ComboBoxItem Content="BUSD"/>
                                <ComboBoxItem Content="THB"/>
                            </ComboBox>
                        </StackPanel>
                    </Grid>

                    <!-- Exchange Selection -->
                    <TextBlock Text="EXCHANGE PAIR" FontSize="11" FontWeight="Bold" Foreground="#60FFFFFF" Margin="0,0,0,10"/>

                    <Grid Margin="0,0,0,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel>
                            <TextBlock Text="Buy Exchange" FontSize="10" Foreground="#10B981" Margin="0,0,0,5"/>
                            <ComboBox x:Name="ExchangeACombo" Style="{StaticResource DarkComboBox}">
                                <ComboBoxItem Content="Binance" IsSelected="True"/>
                                <ComboBoxItem Content="KuCoin"/>
                                <ComboBoxItem Content="OKX"/>
                                <ComboBoxItem Content="Bybit"/>
                                <ComboBoxItem Content="Gate.io"/>
                                <ComboBoxItem Content="Bitkub"/>
                            </ComboBox>
                        </StackPanel>

                        <Path Grid.Column="1" Data="M0,10 L15,0 L15,7 L30,7 L30,13 L15,13 L15,20 Z"
                              Fill="#7C3AED" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,15,0,0"/>

                        <StackPanel Grid.Column="2">
                            <TextBlock Text="Sell Exchange" FontSize="10" Foreground="#EF4444" Margin="0,0,0,5"/>
                            <ComboBox x:Name="ExchangeBCombo" Style="{StaticResource DarkComboBox}">
                                <ComboBoxItem Content="Binance"/>
                                <ComboBoxItem Content="KuCoin" IsSelected="True"/>
                                <ComboBoxItem Content="OKX"/>
                                <ComboBoxItem Content="Bybit"/>
                                <ComboBoxItem Content="Gate.io"/>
                                <ComboBoxItem Content="Bitkub"/>
                            </ComboBox>
                        </StackPanel>
                    </Grid>

                    <!-- Trading Settings -->
                    <TextBlock Text="TRADING SETTINGS" FontSize="11" FontWeight="Bold" Foreground="#60FFFFFF" Margin="0,0,0,10"/>

                    <Border Background="#10FFFFFF" CornerRadius="10" Padding="15" Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock Text="Minimum Spread (%)" FontSize="10" Foreground="#80FFFFFF" Margin="0,0,0,5"/>
                            <Grid Margin="0,0,0,15">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="60"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="MinSpreadSlider" Minimum="0.05" Maximum="2" Value="0.1"
                                       VerticalAlignment="Center" ValueChanged="MinSpreadSlider_ValueChanged"/>
                                <TextBox x:Name="MinSpreadText" Grid.Column="1" Text="0.10%" TextAlignment="Center"
                                        Background="#15FFFFFF" Foreground="White" BorderThickness="0" Padding="5"
                                        VerticalContentAlignment="Center" IsReadOnly="True"/>
                            </Grid>

                            <TextBlock Text="Trade Amount (USD)" FontSize="10" Foreground="#80FFFFFF" Margin="0,0,0,5"/>
                            <TextBox x:Name="TradeAmountInput" Text="100" Height="35" Background="#15FFFFFF"
                                    Foreground="White" BorderThickness="0" Padding="10,0"
                                    VerticalContentAlignment="Center" Margin="0,0,0,15"/>

                            <StackPanel Orientation="Horizontal">
                                <CheckBox x:Name="AutoTradeCheck" IsChecked="False" VerticalAlignment="Center"/>
                                <TextBlock Text="Enable Auto-Trading" Foreground="White" Margin="10,0,0,0" VerticalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Validation Info -->
                    <Border x:Name="ValidationBorder" Background="#15F59E0B" CornerRadius="8" Padding="12" Margin="0,0,0,15" Visibility="Collapsed">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="!" FontSize="16" FontWeight="Bold" Foreground="#F59E0B" Margin="0,0,10,0"/>
                            <TextBlock x:Name="ValidationText" Text="" Foreground="#F59E0B" FontSize="12" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>

                    <!-- Pair Preview -->
                    <Border Background="#10FFFFFF" CornerRadius="10" Padding="15">
                        <StackPanel>
                            <TextBlock Text="PAIR PREVIEW" FontSize="10" Foreground="#60FFFFFF" Margin="0,0,0,10"/>
                            <StackPanel Orientation="Horizontal">
                                <Border Width="40" Height="40" CornerRadius="20" Background="#F7931A" Margin="0,0,10,0">
                                    <TextBlock x:Name="PreviewIcon" Text="B" FontSize="18" FontWeight="Bold" Foreground="White"
                                              HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <StackPanel VerticalAlignment="Center">
                                    <TextBlock x:Name="PreviewSymbol" Text="BTC/USDT" FontSize="16" FontWeight="Bold" Foreground="White"/>
                                    <TextBlock x:Name="PreviewExchanges" Text="Binance -> KuCoin" FontSize="11" Foreground="#60FFFFFF"/>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- Buttons -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="25,15,25,25">
                <Button Content="Cancel" Width="100" Height="40" Click="CancelButton_Click"
                        Background="#30FFFFFF" Foreground="White" BorderThickness="0"
                        FontWeight="SemiBold" Cursor="Hand" Margin="0,0,10,0">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" CornerRadius="8">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <Button Content="Add Pair" Width="120" Height="40" Click="AddPairButton_Click"
                        Foreground="White" BorderThickness="0" FontWeight="Bold" Cursor="Hand">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="border" CornerRadius="8">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#10B981" Offset="0"/>
                                        <GradientStop Color="#059669" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Opacity" Value="0.9"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
</Window>
